let e=document.createElement("style");e.innerHTML=".content_ade49d82{height:100%;overflow-y:auto;position:relative}.content_ade49d82 span{color:#888;font-size:large;display:inline-block;margin-bottom:10px}.canvas_ade49d82{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.base_ade49d82{height:500px;margin-bottom:20px}.compare_ade49d82{height:500px;display:flex}.compare_ade49d82 div{flex:1}.compare_ade49d82>div:nth-child(1){margin-right:10px;display:flex;flex-direction:column}.compare_ade49d82>div:nth-child(2){margin-left:10px;display:flex;flex-direction:column}",document.head.appendChild(e);import{d as t,r as a,o as n,W as o,b as s,B as i,T as l,S as r,C as d,M as c,e as p,a as m,aR as u,P as h,O as f,D as v,v as w}from"./index.70147efe.js";import{r as g,e as x,G as b,P as y,a as _}from"./index.426d9030.js";import{j as C}from"./jsx.4984865e.js";import{T}from"./TrackballControls.063ac05e.js";var E="content_ade49d82",P="canvas_ade49d82",j="base_ade49d82",k="compare_ade49d82";let M=0;const B=[],R=(e,t,a)=>{const{scene:n,camera:o,cameraPole:s}=(()=>{const e=new r;e.background=new d("white");const t=new h(60,2,.1,200);t.position.z=30;const a=new f;a.add(t),e.add(a);const n=new v;return n.position.set(-1,2,4),t.add(n),{scene:e,camera:t,cameraPole:a}})(),_=new i,C=(new l).load("textures/frame.png"),E={},P=new r;P.background=new d(0);for(let e=100;e--;){const t=new c({color:g()});2!==a&&3!==a||(t.map=C,t.transparent=!0,t.alphaTest=.5,t.side=p);const o=new m(_,t);if(n.add(o),o.position.set(x(-20,20),x(-20,20),x(-20,20)),o.rotation.set(x(Math.PI),x(Math.PI),0),o.scale.set(x(2,5),x(2,5),x(2,5)),3===a){const t=e+1;E[t]=o;const a=new c({emissive:t,map:C,color:0,specular:0,transparent:!0,alphaTest:.5,blending:u}),n=new m(_,a);P.add(n),n.position.copy(o.position),n.rotation.copy(o.rotation),n.scale.copy(o.scale)}}const j=new T(o,e);j.noPan=!0,j.noZoom=!0,j.update();const k=new w(-1e4,-1e4),M=3===a?new b:new y;e.addEventListener("mousemove",t=>{const{left:n,top:o,width:s,height:i}=e.getBoundingClientRect();3===a?(k.x=t.clientX-n,k.y=t.clientY-o):(k.x=(t.clientX-n)/s*2-1,k.y=-(t.clientY-o)/i*2+1)}),e.addEventListener("mouseleave",()=>{k.x=-1e4,k.y=-1e4});const R=t.domElement.parentElement.getBoundingClientRect();B.push(i=>{const l=e.getBoundingClientRect();if(l.bottom<R.top||l.top>R.bottom)return;const r=l.left-R.left,d=R.bottom-l.bottom;t.setScissor(r,d,l.width,l.height),t.setViewport(r,d,l.width,l.height),o.aspect=l.width/l.height,o.updateProjectionMatrix(),s.rotation.y=.02*i,3===a?M.pick(k,E,t,P,o,i,l.width,l.height):M.pick(k,n,o,i),j.update(),t.render(n,o)})};var S=t({setup(){const e=a(null),t=a(null),i=a(null),l=a(null);return n(()=>{const a=new o({canvas:e.value});R(t.value,a,1),R(i.value,a,2),R(l.value,a,3);const n=e=>{e*=.001,_(a),a.setClearColor(16777215),a.setScissorTest(!1),a.clear(),a.setClearColor(14737632),a.setScissorTest(!0);const t=a.domElement,o=t.parentElement;t.style.transform=`translateY(${o.scrollTop}px)`,B.forEach(t=>t(e)),M=requestAnimationFrame(n)};M=requestAnimationFrame(n)}),s(()=>{cancelAnimationFrame(M)}),()=>C("div",{class:E},C("canvas",{ref:e,class:P}),C("span",null,"光线投射（非透明）"),C("div",{ref:t,class:j}),C("div",{class:k},C("div",null,C("span",null,"光线投射（透明）"),C("div",{ref:i})),C("div",null,C("span",null,"像素拾取（透明）"),C("div",{ref:l}))))}});export default S;
