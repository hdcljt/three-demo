import{q as e,V as t,u as o,v as n,Q as a}from"./index.f7c153f6.js";var s=function(o,s){void 0===s&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),s===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var c=this,i=-1,r=0,p=1,m=2,d=3,h=4;this.object=o,this.domElement=s,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:e.ROTATE,MIDDLE:e.ZOOM,RIGHT:e.PAN},this.target=new t;var u=new t,l=1,g=i,y=i,b=new t,v=new n,E=new n,w=new t,f=0,j=new n,L=new n,D=0,k=0,C=new n,z=new n;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var T={type:"change"},Y={type:"start"},x={type:"end"};this.handleResize=function(){var e=c.domElement.getBoundingClientRect(),t=c.domElement.ownerDocument.documentElement;c.screen.left=e.left+window.pageXOffset-t.clientLeft,c.screen.top=e.top+window.pageYOffset-t.clientTop,c.screen.width=e.width,c.screen.height=e.height};var P,X,R,S,M,O,q,A,V,F,Z,H=(P=new n,function(e,t){return P.set((e-c.screen.left)/c.screen.width,(t-c.screen.top)/c.screen.height),P}),B=function(){var e=new n;return function(t,o){return e.set((t-.5*c.screen.width-c.screen.left)/(.5*c.screen.width),(c.screen.height+2*(c.screen.top-o))/c.screen.width),e}}();function Q(e){!1!==c.enabled&&(window.removeEventListener("keydown",Q),y===i&&(e.keyCode!==c.keys[r]||c.noRotate?e.keyCode!==c.keys[p]||c.noZoom?e.keyCode!==c.keys[m]||c.noPan||(y=m):y=p:y=r))}function I(){!1!==c.enabled&&(y=i,window.addEventListener("keydown",Q,!1))}function U(e){if(!1!==c.enabled){if(e.preventDefault(),e.stopPropagation(),g===i)switch(e.button){case c.mouseButtons.LEFT:g=r;break;case c.mouseButtons.MIDDLE:g=p;break;case c.mouseButtons.RIGHT:g=m;break;default:g=i}var t=y!==i?y:g;t!==r||c.noRotate?t!==p||c.noZoom?t!==m||c.noPan||(C.copy(H(e.pageX,e.pageY)),z.copy(C)):(j.copy(H(e.pageX,e.pageY)),L.copy(j)):(E.copy(B(e.pageX,e.pageY)),v.copy(E)),c.domElement.ownerDocument.addEventListener("mousemove",G,!1),c.domElement.ownerDocument.addEventListener("mouseup",W,!1),c.dispatchEvent(Y)}}function G(e){if(!1!==c.enabled){e.preventDefault(),e.stopPropagation();var t=y!==i?y:g;t!==r||c.noRotate?t!==p||c.noZoom?t!==m||c.noPan||z.copy(H(e.pageX,e.pageY)):L.copy(H(e.pageX,e.pageY)):(v.copy(E),E.copy(B(e.pageX,e.pageY)))}}function W(e){!1!==c.enabled&&(e.preventDefault(),e.stopPropagation(),g=i,c.domElement.ownerDocument.removeEventListener("mousemove",G),c.domElement.ownerDocument.removeEventListener("mouseup",W),c.dispatchEvent(x))}function N(e){if(!1!==c.enabled&&!0!==c.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:j.y-=.025*e.deltaY;break;case 1:j.y-=.01*e.deltaY;break;default:j.y-=25e-5*e.deltaY}c.dispatchEvent(Y),c.dispatchEvent(x)}}function J(e){if(!1!==c.enabled){switch(e.preventDefault(),e.touches.length){case 1:g=d,E.copy(B(e.touches[0].pageX,e.touches[0].pageY)),v.copy(E);break;default:g=h;var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;k=D=Math.sqrt(t*t+o*o);var n=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;C.copy(H(n,a)),z.copy(C)}c.dispatchEvent(Y)}}function K(e){if(!1!==c.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:v.copy(E),E.copy(B(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;k=Math.sqrt(t*t+o*o);var n=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;z.copy(H(n,a))}}function $(e){if(!1!==c.enabled){switch(e.touches.length){case 0:g=i;break;case 1:g=d,E.copy(B(e.touches[0].pageX,e.touches[0].pageY)),v.copy(E)}c.dispatchEvent(x)}}function _(e){!1!==c.enabled&&e.preventDefault()}this.rotateCamera=(R=new t,S=new a,M=new t,O=new t,q=new t,A=new t,function(){A.set(E.x-v.x,E.y-v.y,0),(X=A.length())?(b.copy(c.object.position).sub(c.target),M.copy(b).normalize(),O.copy(c.object.up).normalize(),q.crossVectors(O,M).normalize(),O.setLength(E.y-v.y),q.setLength(E.x-v.x),A.copy(O.add(q)),R.crossVectors(A,b).normalize(),X*=c.rotateSpeed,S.setFromAxisAngle(R,X),b.applyQuaternion(S),c.object.up.applyQuaternion(S),w.copy(R),f=X):!c.staticMoving&&f&&(f*=Math.sqrt(1-c.dynamicDampingFactor),b.copy(c.object.position).sub(c.target),S.setFromAxisAngle(w,f),b.applyQuaternion(S),c.object.up.applyQuaternion(S)),v.copy(E)}),this.zoomCamera=function(){var e;g===h?(e=D/k,D=k,c.object.isPerspectiveCamera?b.multiplyScalar(e):c.object.isOrthographicCamera?(c.object.zoom*=e,c.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(L.y-j.y)*c.zoomSpeed)&&e>0&&(c.object.isPerspectiveCamera?b.multiplyScalar(e):c.object.isOrthographicCamera?(c.object.zoom/=e,c.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),c.staticMoving?j.copy(L):j.y+=(L.y-j.y)*this.dynamicDampingFactor)},this.panCamera=(V=new n,F=new t,Z=new t,function(){if(V.copy(z).sub(C),V.lengthSq()){if(c.object.isOrthographicCamera){var e=(c.object.right-c.object.left)/c.object.zoom/c.domElement.clientWidth,t=(c.object.top-c.object.bottom)/c.object.zoom/c.domElement.clientWidth;V.x*=e,V.y*=t}V.multiplyScalar(b.length()*c.panSpeed),Z.copy(b).cross(c.object.up).setLength(V.x),Z.add(F.copy(c.object.up).setLength(V.y)),c.object.position.add(Z),c.target.add(Z),c.staticMoving?C.copy(z):C.add(V.subVectors(z,C).multiplyScalar(c.dynamicDampingFactor))}}),this.checkDistances=function(){c.noZoom&&c.noPan||(b.lengthSq()>c.maxDistance*c.maxDistance&&(c.object.position.addVectors(c.target,b.setLength(c.maxDistance)),j.copy(L)),b.lengthSq()<c.minDistance*c.minDistance&&(c.object.position.addVectors(c.target,b.setLength(c.minDistance)),j.copy(L)))},this.update=function(){b.subVectors(c.object.position,c.target),c.noRotate||c.rotateCamera(),c.noZoom||c.zoomCamera(),c.noPan||c.panCamera(),c.object.position.addVectors(c.target,b),c.object.isPerspectiveCamera?(c.checkDistances(),c.object.lookAt(c.target),u.distanceToSquared(c.object.position)>1e-6&&(c.dispatchEvent(T),u.copy(c.object.position))):c.object.isOrthographicCamera?(c.object.lookAt(c.target),(u.distanceToSquared(c.object.position)>1e-6||l!==c.object.zoom)&&(c.dispatchEvent(T),u.copy(c.object.position),l=c.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){g=i,y=i,c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.up.copy(c.up0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),b.subVectors(c.object.position,c.target),c.object.lookAt(c.target),c.dispatchEvent(T),u.copy(c.object.position),l=c.object.zoom},this.dispose=function(){c.domElement.removeEventListener("contextmenu",_,!1),c.domElement.removeEventListener("mousedown",U,!1),c.domElement.removeEventListener("wheel",N,!1),c.domElement.removeEventListener("touchstart",J,!1),c.domElement.removeEventListener("touchend",$,!1),c.domElement.removeEventListener("touchmove",K,!1),c.domElement.ownerDocument.removeEventListener("mousemove",G,!1),c.domElement.ownerDocument.removeEventListener("mouseup",W,!1),window.removeEventListener("keydown",Q,!1),window.removeEventListener("keyup",I,!1)},this.domElement.addEventListener("contextmenu",_,!1),this.domElement.addEventListener("mousedown",U,!1),this.domElement.addEventListener("wheel",N,!1),this.domElement.addEventListener("touchstart",J,!1),this.domElement.addEventListener("touchend",$,!1),this.domElement.addEventListener("touchmove",K,!1),window.addEventListener("keydown",Q,!1),window.addEventListener("keyup",I,!1),this.handleResize(),this.update()};(s.prototype=Object.create(o.prototype)).constructor=s;export{s as T};
