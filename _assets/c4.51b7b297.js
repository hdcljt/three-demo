let e=document.createElement("style");e.innerHTML="",document.head.appendChild(e);import{d as n,r as a,o as t,W as s,B as o,T as r,x as l,a as c,y as p,j as u,z as d,H as i,i as g,M as m,P as w,S as x,C as f,b as j,I as v,D as b}from"./index.f7c153f6.js";import{g as T,a as y}from"./index.22ce2b7e.js";import"./OrbitControls.7a42b37a.js";import{s as C}from"./c2.module.26290ea6.js";import{j as h}from"./jsx.fc43f11e.js";import{T as z}from"./TrackballControls.b57109b3.js";let R=0;const L=["TextureLoader","LoadingManager","CubeTextureLoader","VideoTexture","CanvasTexture","RenderTarget.texture","Scene.background"],M=[],B=(e,n,a,t,s)=>{const{scene:o,camera:r,controls:l}=(e=>{const n=new x,a=new w(45,1,.1,100);a.position.set(-1,1,2),n.add(a);const t=new b;t.position.set(-1,2,4),a.add(t);const s=new z(a,e);return s.noPan=!0,s.noZoom=!0,{scene:n,camera:a,controls:s}})(n);o.add(a),s&&s(o,r),((e,n)=>{M.push({elem:e,fn:n})})(n,n=>{t&&t(e,o),l.update(),e.render(o,r)})};var S=n({setup(){const e=a(null),n=a(null),b=a(null),z=a([]);return t(()=>{const a=new s({canvas:e.value}),t=new o;L.forEach((e,n)=>{let s;if("TextureLoader"===e){const e=new r,o=new l({map:e.load("/textures/cube/neg-x.jpg")});s=new c(t,o),B(a,z.value[n],s)}else if("LoadingManager"===e){const e=new v,o=new r(e),p=[new l({map:o.load("/textures/cube/pos-x.jpg")}),new l({map:o.load("/textures/cube/neg-x.jpg")}),new l({map:o.load("/textures/cube/pos-y.jpg")}),new l({map:o.load("/textures/cube/neg-y.jpg")}),new l({map:o.load("/textures/cube/pos-z.jpg")}),new l({map:o.load("/textures/cube/neg-z.jpg")})];s=new c(t,p),B(a,z.value[n],s)}else if("CubeTextureLoader"===e){const e=(new p).setPath("/textures/cube/").load(["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"]),t=new l({envMap:e});s=new c(new u(.8,32,16),t),B(a,z.value[n],s)}else if("VideoTexture"===e){b.value.play();const e=new d(b.value),t=new l({map:e}),o=new u(2,32,16);o.scale(-1,1,1),s=new c(o,t),B(a,z.value[n],s)}else if("CanvasTexture"===e){const{canvas:e,drawRandDot:o}=T,r=new i(e),p=new l({map:r});s=new c(t,p),B(a,z.value[n],s,()=>{o(),r.needsUpdate=!0})}else if("RenderTarget.texture"===e){const e=new g(512,512,{depthBuffer:!1,stencilBuffer:!1});s=new c(t,new m({map:e.texture}));const{canvas:o,drawRandDot:r}=T,p=new i(o),u=new c(t,new l({map:p})),d=new w(45,1,.1,100);d.position.z=3;const j=new x;j.background=new f("cyan"),j.add(u),B(a,z.value[n],s,n=>{r(),p.needsUpdate=!0,u.rotation.x+=.01,u.rotation.y+=.01,n.setRenderTarget(e),n.render(j,d),n.setRenderTarget(null)})}else{const e=(new p).setPath("/textures/cube/").load(["pos-x.jpg","neg-x.jpg","pos-y.jpg","neg-y.jpg","pos-z.jpg","neg-z.jpg"]),t=new l({envMap:e});s=new c(new u(.4,32,16),t),B(a,z.value[n],s,void 0,n=>{n.background=e})}});const j=e=>{e*=.001,y(a),a.setClearColor(16777215),a.setScissorTest(!1),a.clear(),a.setClearColor(14737632),a.setScissorTest(!0),((e,n,a)=>{const t=e.domElement,s=a.scrollTop;t.style.transform=`translateY(${s}px)`;const{left:o,top:r,bottom:l}=a.getBoundingClientRect();M.forEach(({elem:a,fn:t})=>{const{left:s,top:c,bottom:p,width:u,height:d}=a.getBoundingClientRect();if(p<r||c>l)return;const i=l-p,g=s-o;e.setScissor(g,i,u,d),e.setViewport(g,i,u,d),t(n)})})(a,e,n.value),R=requestAnimationFrame(j)};R=requestAnimationFrame(j)}),j(()=>{cancelAnimationFrame(R)}),()=>h("div",{ref:n,class:C.content},h("video",{ref:b,src:"/textures/pano.mp4",muted:!0,loop:!0,playsinline:!0,crossorigin:"anonymous",class:C.hide}),h("canvas",{ref:e,class:C.canvas}),L.map((e,n)=>h("div",{class:C.item},h("div",{ref:e=>{z.value[n]=e}}),h("div",null,e))))}});export default S;
